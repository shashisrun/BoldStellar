{"ast":null,"code":"import axios from '../Services/ApiService';\nimport CookieService from '../Services/CookieService';\nconst cookie = new CookieService();\n\nclass ApiRepositories {\n  async GetBlogs() {\n    try {\n      const response = await axios.get('/api/blog/1');\n      return response.data;\n    } catch (error) {\n      console.error('Error', error.response);\n      return false;\n    }\n  }\n\n  async doUserLogin(credentials) {\n    try {\n      const response = await axios.post('oauth/token', credentials);\n      return response.data;\n    } catch (error) {\n      //console.error('Error', error.response);\n      return false;\n    }\n  }\n\n  async doUserRegistration(credentials) {\n    try {\n      const response = await axios.post('api/register', credentials);\n      return response.data;\n    } catch (error) {\n      console.error('Error', error);\n      return false;\n    }\n  }\n\n  async doUserLogout(credentials) {\n    try {\n      const response = await axios.post('api/logout', credentials);\n      cookie.remove('refresh_token');\n      cookie.remove('access_token');\n      cookie.remove('remeber_me');\n      console.error(response);\n      return response.data;\n    } catch (error) {\n      console.error('Error', error);\n      return false;\n    }\n  }\n\n  async doUserLogoutAll(credentials) {\n    try {\n      const response = await axios.post('api/logout/all', credentials);\n      cookie.remove('refresh_token');\n      cookie.remove('access_token');\n      cookie.remove('remeber_me');\n      console.error(response);\n      return response.data;\n    } catch (error) {\n      console.error('Error', error);\n      return false;\n    }\n  }\n\n  handleLoginSucces(response, remember = false) {\n    if (remember == false) {\n      const options = {\n        path: '/'\n      };\n      cookie.set('refresh_token', response.refresh_token, options);\n      cookie.set('access_token', response.access_token, options);\n      cookie.set('remeber_me', false);\n    } else {\n      const options = {\n        path: '/',\n        maxAge: response.expires_in\n      };\n      cookie.set('refresh_token', response.refresh_token, options);\n      cookie.set('access_token', response.access_token, {\n        path: '/'\n      });\n      cookie.set('remeber_me', true);\n    }\n\n    return true;\n  }\n\n  async isLoggedIn() {\n    if (cookie.get('access_token') != null) {\n      return true;\n    } else {\n      if (cookie.get('refresh_token') != null) {\n        const refreshCredentials = {\n          'refresh_token': cookie.get('refresh_token'),\n          'grant_type': 'refresh_token',\n          'client_id': '2',\n          'client_secret': 'h4Rszv34VV9o0BHKhowVSLEg5kfFIEvNlJoALpHc'\n        };\n\n        try {\n          const response = await axios.post('oauth/token', refreshCredentials); //console.log(response);\n\n          var options = null;\n\n          if (cookie.get('remember_me') == true) {\n            options = {\n              path: '/',\n              maxAge: response.expires_in\n            };\n          } else {\n            options = {\n              path: '/'\n            };\n          }\n\n          cookie.set('refresh_token', response.data.refresh_token, options);\n          cookie.set('access_token', response.data.access_token, {\n            path: '/'\n          });\n          return true;\n        } catch (error) {\n          console.error('Error', error.response);\n          return false;\n        }\n      } else {\n        return false;\n      }\n    }\n  }\n\n}\n\nexport default new ApiRepositories();","map":{"version":3,"sources":["/var/www-old/html/boldstellar/src/Library/ApiRepositories.js"],"names":["axios","CookieService","cookie","ApiRepositories","GetBlogs","response","get","data","error","console","doUserLogin","credentials","post","doUserRegistration","doUserLogout","remove","doUserLogoutAll","handleLoginSucces","remember","options","path","set","refresh_token","access_token","maxAge","expires_in","isLoggedIn","refreshCredentials"],"mappings":"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","sourcesContent":["import axios from '../Services/ApiService';\nimport CookieService from '../Services/CookieService';\n\nconst cookie = new CookieService;\nclass ApiRepositories {\n\n    async GetBlogs(){\n        try{\n            const response = await axios.get('/api/blog/1');\n            return response.data;\n        } catch(error) {\n            console.error('Error', error.response);\n            return false;\n        }\n    }\n\n    async doUserLogin(credentials){\n        try{\n            const response = await axios.post('oauth/token', credentials);\n            return response.data;\n        } catch(error) {\n            //console.error('Error', error.response);\n            return false;\n        }\n    }\n    async doUserRegistration(credentials){\n        try{\n            const response = await axios.post('api/register', credentials);\n            return response.data;\n        } catch(error) {\n            console.error('Error', error);\n            return false;\n        }\n    }\n    async doUserLogout(credentials){\n        try{\n            const response = await axios.post('api/logout', credentials);\n            cookie.remove('refresh_token');\n            cookie.remove('access_token');\n            cookie.remove('remeber_me');\n            console.error(response);\n            return response.data;\n        } catch(error) {\n            console.error('Error', error);\n            return false;\n        }\n    }\n\n    async doUserLogoutAll(credentials){\n        try{\n            const response = await axios.post('api/logout/all', credentials);\n            cookie.remove('refresh_token');\n            cookie.remove('access_token');\n            cookie.remove('remeber_me');\n            console.error(response);\n            return response.data;\n        } catch(error) {\n            console.error('Error', error);\n            return false;\n        }\n    }\n\n    handleLoginSucces(response, remember = false){\n        if(remember == false){\n            const options = {path: '/'};\n            cookie.set('refresh_token', response.refresh_token, options);\n            cookie.set('access_token', response.access_token, options);\n            cookie.set('remeber_me', false);\n        }\n        else{\n            const options = {path: '/', maxAge: response.expires_in};\n            cookie.set('refresh_token', response.refresh_token, options);\n            cookie.set('access_token', response.access_token, {path: '/'});\n            cookie.set('remeber_me', true);\n        }\n        return true;\n    }\n\n    async isLoggedIn(){\n        if (cookie.get('access_token') != null){\n            return true;\n        }\n        else{\n            if (cookie.get('refresh_token') != null) {\n                const refreshCredentials = {\n                    'refresh_token': cookie.get('refresh_token'),\n                    'grant_type': 'refresh_token',\n                    'client_id': '2',\n                    'client_secret': 'h4Rszv34VV9o0BHKhowVSLEg5kfFIEvNlJoALpHc'\n                };\n                try{\n                    const response = await axios.post('oauth/token', refreshCredentials);\n                    //console.log(response);\n                    var options = null;\n                    if (cookie.get('remember_me') == true) {\n                        options = {path: '/', maxAge: response.expires_in};    \n                    } else {\n                        options = {path: '/'};\n                    }\n                    cookie.set('refresh_token', response.data.refresh_token, options);\n                    cookie.set('access_token', response.data.access_token, {path: '/'});\n                    return true;\n                } catch(error) {\n                    console.error('Error', error.response);\n                    return false;\n                }    \n            } else {\n                return false;\n            }\n            \n        }\n    }\n}\n\nexport default new ApiRepositories();"]},"metadata":{},"sourceType":"module"}