{"ast":null,"code":"import axios from '../Services/ApiService';\nimport CookieService from '../Services/CookieService';\nconst cookie = new CookieService();\n\nclass ApiRepositories {\n  async GetMenu() {\n    try {\n      const response = await axios.get('/api/menu/1');\n      return response.data;\n    } catch (error) {\n      console.error('Error', error.response);\n      return false;\n    }\n  }\n\n  async CreateMenu($blog) {\n    try {\n      console.clear(); // var data = new FormData();\n      // data.append('title', 'Menu1');\n      // data.append('url', 'localhost');\n      // data.append('status', '1');\n      // data.append('sortby', '1');\n\n      const response = await axios.post('/api/menu', blog);\n      console.log(response);\n      return response.data;\n    } catch (error) {\n      console.error('Error', error.response);\n      return false;\n    }\n  }\n\n  async doUserLogin(credentials) {\n    try {\n      const response = await axios.post('oauth/token', credentials);\n      return response.data;\n    } catch (error) {\n      //console.error('Error', error.response);\n      return false;\n    }\n  }\n\n  async doUserRegistration(credentials) {\n    try {\n      const response = await axios.post('api/register', credentials);\n      return response.data;\n    } catch (error) {\n      console.error('Error', error);\n      return false;\n    }\n  }\n\n  async doUserLogout(credentials) {\n    try {\n      const response = await axios.post('api/logout', credentials);\n      cookie.remove('refresh_token');\n      cookie.remove('access_token');\n      cookie.remove('remeber_me');\n      console.error(response);\n      return response.data;\n    } catch (error) {\n      console.error('Error', error);\n      return false;\n    }\n  }\n\n  async doUserLogoutAll(credentials) {\n    try {\n      const response = await axios.post('api/logout/all', credentials);\n      cookie.remove('refresh_token');\n      cookie.remove('access_token');\n      cookie.remove('remeber_me');\n      console.error(response);\n      return response.data;\n    } catch (error) {\n      console.error('Error', error);\n      return false;\n    }\n  }\n\n  handleLoginSucces(response, remember = false) {\n    if (remember == false) {\n      const options = {\n        path: '/'\n      };\n      cookie.set('refresh_token', response.refresh_token, options);\n      cookie.set('access_token', response.access_token, options);\n      cookie.set('remeber_me', false);\n    } else {\n      const options = {\n        path: '/',\n        maxAge: response.expires_in\n      };\n      cookie.set('refresh_token', response.refresh_token, options);\n      cookie.set('access_token', response.access_token, {\n        path: '/'\n      });\n      cookie.set('remeber_me', true);\n    }\n\n    return true;\n  }\n\n  async isLoggedIn() {\n    if (cookie.get('access_token') != null) {\n      return true;\n    } else {\n      if (cookie.get('refresh_token') != null) {\n        const refreshCredentials = {\n          'refresh_token': cookie.get('refresh_token'),\n          'grant_type': 'refresh_token',\n          'client_id': '2',\n          'client_secret': 'h4Rszv34VV9o0BHKhowVSLEg5kfFIEvNlJoALpHc'\n        };\n\n        try {\n          const response = await axios.post('oauth/token', refreshCredentials); //console.log(response);\n\n          var options = null;\n\n          if (cookie.get('remember_me') == true) {\n            options = {\n              path: '/',\n              maxAge: response.expires_in\n            };\n          } else {\n            options = {\n              path: '/'\n            };\n          }\n\n          cookie.set('refresh_token', response.data.refresh_token, options);\n          cookie.set('access_token', response.data.access_token, {\n            path: '/'\n          });\n          return true;\n        } catch (error) {\n          console.error('Error', error.response);\n          return false;\n        }\n      } else {\n        return false;\n      }\n    }\n  }\n\n}\n\nexport default new ApiRepositories();","map":{"version":3,"sources":["/var/www/html/boldstellar/src/Library/ApiRepositories.js"],"names":["axios","CookieService","cookie","ApiRepositories","GetMenu","response","get","data","error","console","CreateMenu","$blog","clear","post","blog","log","doUserLogin","credentials","doUserRegistration","doUserLogout","remove","doUserLogoutAll","handleLoginSucces","remember","options","path","set","refresh_token","access_token","maxAge","expires_in","isLoggedIn","refreshCredentials"],"mappings":"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","sourcesContent":["import axios from '../Services/ApiService';\nimport CookieService from '../Services/CookieService';\n\nconst cookie = new CookieService;\nclass ApiRepositories {\n\n    async GetMenu(){\n        try{\n            const response = await axios.get('/api/menu/1');\n            return response.data;\n        } catch(error) {\n            console.error('Error', error.response);\n            return false;\n        }\n    }\n\n    async CreateMenu($blog){\n        try{\n            console.clear()\n            // var data = new FormData();\n            // data.append('title', 'Menu1');\n            // data.append('url', 'localhost');\n            // data.append('status', '1');\n            // data.append('sortby', '1');\n\n            const response = await axios.post('/api/menu', blog);\n            console.log(response);\n            return response.data;\n        } catch(error) {\n            console.error('Error', error.response);\n            return false;\n        }\n    }\n\n\n    async doUserLogin(credentials){\n        try{\n            const response = await axios.post('oauth/token', credentials);\n            return response.data;\n        } catch(error) {\n            //console.error('Error', error.response);\n            return false;\n        }\n    }\n    async doUserRegistration(credentials){\n        try{\n            const response = await axios.post('api/register', credentials);\n            return response.data;\n        } catch(error) {\n            console.error('Error', error);\n            return false;\n        }\n    }\n    async doUserLogout(credentials){\n        try{\n            const response = await axios.post('api/logout', credentials);\n            cookie.remove('refresh_token');\n            cookie.remove('access_token');\n            cookie.remove('remeber_me');\n            console.error(response);\n            return response.data;\n        } catch(error) {\n            console.error('Error', error);\n            return false;\n        }\n    }\n\n    async doUserLogoutAll(credentials){\n        try{\n            const response = await axios.post('api/logout/all', credentials);\n            cookie.remove('refresh_token');\n            cookie.remove('access_token');\n            cookie.remove('remeber_me');\n            console.error(response);\n            return response.data;\n        } catch(error) {\n            console.error('Error', error);\n            return false;\n        }\n    }\n\n    handleLoginSucces(response, remember = false){\n        if(remember == false){\n            const options = {path: '/'};\n            cookie.set('refresh_token', response.refresh_token, options);\n            cookie.set('access_token', response.access_token, options);\n            cookie.set('remeber_me', false);\n        }\n        else{\n            const options = {path: '/', maxAge: response.expires_in};\n            cookie.set('refresh_token', response.refresh_token, options);\n            cookie.set('access_token', response.access_token, {path: '/'});\n            cookie.set('remeber_me', true);\n        }\n        return true;\n    }\n\n    async isLoggedIn(){\n        if (cookie.get('access_token') != null){\n            return true;\n        }\n        else{\n            if (cookie.get('refresh_token') != null) {\n                const refreshCredentials = {\n                    'refresh_token': cookie.get('refresh_token'),\n                    'grant_type': 'refresh_token',\n                    'client_id': '2',\n                    'client_secret': 'h4Rszv34VV9o0BHKhowVSLEg5kfFIEvNlJoALpHc'\n                };\n                try{\n                    const response = await axios.post('oauth/token', refreshCredentials);\n                    //console.log(response);\n                    var options = null;\n                    if (cookie.get('remember_me') == true) {\n                        options = {path: '/', maxAge: response.expires_in};    \n                    } else {\n                        options = {path: '/'};\n                    }\n                    cookie.set('refresh_token', response.data.refresh_token, options);\n                    cookie.set('access_token', response.data.access_token, {path: '/'});\n                    return true;\n                } catch(error) {\n                    console.error('Error', error.response);\n                    return false;\n                }    \n            } else {\n                return false;\n            }\n            \n        }\n    }\n}\n\nexport default new ApiRepositories();"]},"metadata":{},"sourceType":"module"}